/**
 * The AVPlayerMini Javascript Interface
 *
 * Based on SWFObject v2.1 <http://code.google.com/p/swfobject/>
 *
 * @author     AlloVince <allo.vince@gmail.com>
 * @copyright  2008-2009 AVE7.NET
 * @license    GNU General Public License v3
 * @link       http://code.google.com/p/tsostplayer/
 */
function AvPlayerMini(){var $=this;this.swf="avplayer.swf";this.playerWidth=240;this.playerHeigth=20;this.dir="./";this.noFlash="<p><a href=\"http://www.adobe.com/go/getflashplayer\">To use AvPlayer ,You need get Adobe Flash player first</a></p>";this.init=function(_){if(typeof(_)=="string")$.dir=_;if(typeof(_)=="object")for(var A in _)$[A]=_[A]};this.addid="avplayer";this.addno=1;this.ids;this.write=function(A){var _=$.addid+$.addno;document.write("<div id=\""+_+"\">"+$.noFlash+"</div>");$.add(_,A);$.addno++};this.add=function(_,A){var B={};if(typeof(A)=="string")if(A.match(/xml|rss$/))B={list:A};else B={link:A};if(typeof(A)=="object")B=A;$.swfobject.embedSWF($.dir+$.swf,_,$.playerWidth,$.playerHeigth,"10.0.0.0",$.dir+"expressInstall.swf",B,{wmode:"transparent"})};this.swfobject=function(){var e="undefined",U="object",d="Shockwave Flash",O="ShockwaveFlash.ShockwaveFlash",D="application/x-shockwave-flash",b="SWFObjectExprInst",X=window,g=document,f=navigator,N=[],K=[],i=[],c=[],Z,L=null,$=null,C=null,Q=false,F=false,j=function(){var K=typeof g.getElementById!=e&&typeof g.getElementsByTagName!=e&&typeof g.createElement!=e,F=[0,0,0],$=null;if(typeof f.plugins!=e&&typeof f.plugins[d]==U){$=f.plugins[d].description;if($&&!(typeof f.mimeTypes!=e&&f.mimeTypes[D]&&!f.mimeTypes[D].enabledPlugin)){$=$.replace(/^.*\s+(\S+\s+\S+$)/,"$1");F[0]=parseInt($.replace(/^(.*)\..*$/,"$1"),10);F[1]=parseInt($.replace(/^.*\.(.*)\s.*$/,"$1"),10);F[2]=/r/.test($)?parseInt($.replace(/^.*r(.*)$/,"$1"),10):0}}else if(typeof X.ActiveXObject!=e){var A=null,H=false;try{A=new ActiveXObject(O+".7")}catch(_){try{A=new ActiveXObject(O+".6");F=[6,0,21];A.AllowScriptAccess="always"}catch(_){if(F[0]==6)H=true}if(!H){try{A=new ActiveXObject(O)}catch(_){}}}if(!H&&A){try{$=A.GetVariable("$version");if($){$=$.split(" ")[1].split(",");F=[parseInt($[0],10),parseInt($[1],10),parseInt($[2],10)]}}catch(_){}}}var G=f.userAgent.toLowerCase(),I=f.platform.toLowerCase(),B=/webkit/.test(G)?parseFloat(G.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,J=false,C=I?/win/.test(I):/win/.test(G),E=I?/mac/.test(I):/mac/.test(G);return{w3cdom:K,pv:F,webkit:B,ie:J,win:C,mac:E}}(),M=function(){if(!j.w3cdom)return;n(a);if(j.ie&&j.win){try{g.write("<scr"+"ipt id=__ie_ondomload defer=true src=//:></scr"+"ipt>");Z=P("__ie_ondomload");if(Z)Y(Z,"onreadystatechange",G)}catch($){}}if(j.webkit&&typeof g.readyState!=e)L=setInterval(function(){if(/loaded|complete/.test(g.readyState))W()},10);if(typeof g.addEventListener!=e)g.addEventListener("DOMContentLoaded",W,null);l(W)}();function G(){if(Z.readyState=="complete"){Z.parentNode.removeChild(Z);W()}}function W(){if(Q)return;if(j.ie&&j.win){var A=m("span");try{var _=g.getElementsByTagName("body")[0].appendChild(A);_.parentNode.removeChild(_)}catch($){return}}Q=true;if(L){clearInterval(L);L=null}var B=N.length;for(var C=0;C<B;C++)N[C]()}function n($){if(Q)$();else N[N.length]=$}function l($){if(typeof X.addEventListener!=e)X.addEventListener("load",$,false);else if(typeof g.addEventListener!=e)g.addEventListener("load",$,false);else if(typeof X.attachEvent!=e)Y(X,"onload",$);else if(typeof X.onload=="function"){var _=X.onload;X.onload=function(){_();$()}}else X.onload=$}function a(){var _=K.length;for(var D=0;D<_;D++){var $=K[D].id;if(j.pv[0]>0){var C=P($);if(C){K[D].width=C.getAttribute("width")?C.getAttribute("width"):"0";K[D].height=C.getAttribute("height")?C.getAttribute("height"):"0";if(I(K[D].swfVersion)){if(j.webkit&&j.webkit<312)B(C);k($,true)}else if(K[D].expressInstall&&!F&&I("6.0.65")&&(j.win||j.mac))A(K[D]);else h(C)}}else k($,true)}}function B(D){var F=D.getElementsByTagName(U)[0];if(F){var _=m("embed"),C=F.attributes;if(C){var $=C.length;for(var G=0;G<$;G++)if(C[G].nodeName=="DATA")_.setAttribute("src",C[G].nodeValue);else _.setAttribute(C[G].nodeName,C[G].nodeValue)}var A=F.childNodes;if(A){var B=A.length;for(var E=0;E<B;E++)if(A[E].nodeType==1&&A[E].nodeName=="PARAM")_.setAttribute(A[E].getAttribute("name"),A[E].getAttribute("value"))}D.parentNode.replaceChild(_,D)}}function A(J){F=true;var H=P(J.id);if(H){if(J.altContentId){var E=P(J.altContentId);if(E){$=E;C=J.altContentId}}else $=R(H);if(!(/%$/.test(J.width))&&parseInt(J.width,10)<310)J.width="310";if(!(/%$/.test(J.height))&&parseInt(J.height,10)<137)J.height="137";g.title=g.title.slice(0,47)+" - Flash Player Installation";var D=j.ie&&j.win?"ActiveX":"PlugIn",_=g.title,A="MMredirectURL="+X.location+"&MMplayerType="+D+"&MMdoctitle="+_,B=J.id;if(j.ie&&j.win&&H.readyState!=4){var G=m("div");B+="SWFObjectNew";G.setAttribute("id",B);H.parentNode.insertBefore(G,H);H.style.display="none";var I=function(){H.parentNode.removeChild(H)};Y(X,"onload",I)}S({data:J.expressInstall,id:b,width:J.width,height:J.height},{flashvars:A},B)}}function h(_){if(j.ie&&j.win&&_.readyState!=4){var $=m("div");_.parentNode.insertBefore($,_);$.parentNode.replaceChild(R(_),$);_.style.display="none";var A=function(){_.parentNode.removeChild(_)};Y(X,"onload",A)}else _.parentNode.replaceChild(R(_),_)}function R(B){var A=m("div");if(j.win&&j.ie)A.innerHTML=B.innerHTML;else{var C=B.getElementsByTagName(U)[0];if(C){var $=C.childNodes;if($){var _=$.length;for(var D=0;D<_;D++)if(!($[D].nodeType==1&&$[D].nodeName=="PARAM")&&!($[D].nodeType==8))A.appendChild($[D].cloneNode(true))}}}return A}function S(_,M,K){var O,N=P(K);if(N){if(typeof _.id==e)_.id=K;if(j.ie&&j.win){var B="";for(var I in _)if(_[I]!=Object.prototype[I])if(I.toLowerCase()=="data")M.movie=_[I];else if(I.toLowerCase()=="styleclass")B+=" class=\""+_[I]+"\"";else if(I.toLowerCase()!="classid")B+=" "+I+"=\""+_[I]+"\"";var L="";for(var G in M)if(M[G]!=Object.prototype[G])L+="<param name=\""+G+"\" value=\""+M[G]+"\" />";N.outerHTML="<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\""+B+">"+L+"</object>";i[i.length]=_.id;O=P(_.id)}else if(j.webkit&&j.webkit<312){var $=m("embed");$.setAttribute("type",D);for(var H in _)if(_[H]!=Object.prototype[H])if(H.toLowerCase()=="data")$.setAttribute("src",_[H]);else if(H.toLowerCase()=="styleclass")$.setAttribute("class",_[H]);else if(H.toLowerCase()!="classid")$.setAttribute(H,_[H]);for(var E in M)if(M[E]!=Object.prototype[E])if(E.toLowerCase()!="movie")$.setAttribute(E,M[E]);N.parentNode.replaceChild($,N);O=$}else{var C=m(U);C.setAttribute("type",D);for(var F in _)if(_[F]!=Object.prototype[F])if(F.toLowerCase()=="styleclass")C.setAttribute("class",_[F]);else if(F.toLowerCase()!="classid")C.setAttribute(F,_[F]);for(var A in M)if(M[A]!=Object.prototype[A]&&A.toLowerCase()!="movie")J(C,A,M[A]);N.parentNode.replaceChild(C,N);O=C}}return O}function J(A,_,$){var B=m("param");B.setAttribute("name",_);B.setAttribute("value",$);A.appendChild(B)}function T($){var _=P($);if(_&&(_.nodeName=="OBJECT"||_.nodeName=="EMBED"))if(j.ie&&j.win){if(_.readyState==4)E($);else X.attachEvent("onload",function(){E($)})}else _.parentNode.removeChild(_)}function E($){var _=P($);if(_){for(var A in _)if(typeof _[A]=="function")_[A]=null;_.parentNode.removeChild(_)}}function P($){var A=null;try{A=g.getElementById($)}catch(_){}return A}function m($){return g.createElement($)}function Y($,_,A){$.attachEvent(_,A);c[c.length]=[$,_,A]}function I(A){var _=j.pv,$=A.split(".");$[0]=parseInt($[0],10);$[1]=parseInt($[1],10)||0;$[2]=parseInt($[2],10)||0;return(_[0]>$[0]||(_[0]==$[0]&&_[1]>$[1])||(_[0]==$[0]&&_[1]==$[1]&&_[2]>=$[2]))?true:false}function V(A,C){if(j.ie&&j.mac)return;var B=g.getElementsByTagName("head")[0],_=m("style");_.setAttribute("type","text/css");_.setAttribute("media","screen");if(!(j.ie&&j.win)&&typeof g.createTextNode!=e)_.appendChild(g.createTextNode(A+" {"+C+"}"));B.appendChild(_);if(j.ie&&j.win&&typeof g.styleSheets!=e&&g.styleSheets.length>0){var $=g.styleSheets[g.styleSheets.length-1];if(typeof $.addRule==U)$.addRule(A,C)}}function k($,A){var _=A?"visible":"hidden";if(Q&&P($))P($).style.visibility=_;else V("#"+$,"visibility:"+_)}function H($){var _=/[\\\"<>\.;]/,A=_.exec($)!=null;return A?encodeURIComponent($):$}var _=function(){if(j.ie&&j.win)window.attachEvent("onunload",function(){var $=c.length;for(var D=0;D<$;D++)c[D][0].detachEvent(c[D][1],c[D][2]);var A=i.length;for(var B=0;B<A;B++)T(i[B]);for(var C in j)j[C]=null;j=null;for(var _ in swfobject)swfobject[_]=null;swfobject=null})}();return{registerObject:function(_,$,A){if(!j.w3cdom||!_||!$)return;var B={};B.id=_;B.swfVersion=$;B.expressInstall=A?A:false;K[K.length]=B;k(_,false)},getObjectById:function($){var _=null;if(j.w3cdom){var B=P($);if(B){var A=B.getElementsByTagName(U)[0];if(!A||(A&&typeof B.SetVariable!=e))_=B;else if(typeof A.SetVariable!=e)_=A}}return _},embedSWF:function(B,K,O,G,$,M,N,L,_){if(!j.w3cdom||!B||!K||!O||!G||!$)return;O+="";G+="";if(I($)){k(K,false);var C={};if(_&&typeof _===U)for(var H in _)if(_[H]!=Object.prototype[H])C[H]=_[H];C.data=B;C.width=O;C.height=G;var J={};if(L&&typeof L===U)for(var D in L)if(L[D]!=Object.prototype[D])J[D]=L[D];if(N&&typeof N===U)for(var E in N)if(N[E]!=Object.prototype[E])if(typeof J.flashvars!=e)J.flashvars+="&"+E+"="+N[E];else J.flashvars=E+"="+N[E];n(function(){S(C,J,K);if(C.id==K)k(K,true)})}else if(M&&!F&&I("6.0.65")&&(j.win||j.mac)){F=true;k(K,false);n(function(){var $={};$.id=$.altContentId=K;$.width=O;$.height=G;$.expressInstall=M;A($)})}},getFlashPlayerVersion:function(){return{major:j.pv[0],minor:j.pv[1],release:j.pv[2]}},hasFlashPlayerVersion:I,createSWF:function(A,_,$){if(j.w3cdom)return S(A,_,$);else return undefined},removeSWF:function($){if(j.w3cdom)T($)},createCSS:function($,_){if(j.w3cdom)V($,_)},addDomLoadEvent:n,addLoadEvent:l,getQueryParamValue:function(_){var A=g.location.search||g.location.hash;if(_==null)return H(A);if(A){var $=A.substring(1).split("&");for(var B=0;B<$.length;B++)if($[B].substring(0,$[B].indexOf("="))==_)return H($[B].substring(($[B].indexOf("=")+1)))}return""},expressInstallCallback:function(){if(F&&$){var _=P(b);if(_){_.parentNode.replaceChild($,_);if(C){k(C,true);if(j.ie&&j.win)$.style.display="block"}$=null;C=null;F=false}}}}}()}var avplayer=new AvPlayerMini();